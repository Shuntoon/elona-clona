[gd_scene load_steps=30 format=3 uid="uid://c4ruds6frs58h"]

[ext_resource type="Script" uid="uid://cvikpqyxjqs5g" path="res://Scripts/GameManager/game_manager.gd" id="1_fc0e3"]
[ext_resource type="PackedScene" uid="uid://ci4hdj038kg5i" path="res://Objects/MouseShooter/mouse_shooter.tscn" id="1_feb5d"]
[ext_resource type="PackedScene" uid="uid://dkvrnpgnp3f86" path="res://UI/PlayerHUD/player_hud.tscn" id="1_ryrav"]
[ext_resource type="PackedScene" uid="uid://d225nmsfm10mv" path="res://UI/UpgradeScreen/upgrade_screen.tscn" id="2_eow3j"]
[ext_resource type="Script" uid="uid://cfhy465135m07" path="res://Scripts/Abilities/ability_manager.gd" id="4_vef74"]
[ext_resource type="Script" uid="uid://c60bxtqxj72gr" path="res://Objects/Spawner/spawner.gd" id="5_7jktm"]
[ext_resource type="Script" uid="uid://cew50k8ripj4e" path="res://Scripts/AugmentManager/augment_manager.gd" id="5_augment"]
[ext_resource type="Script" uid="uid://c60utqbyl6xt7" path="res://Scripts/Abilities/fire_rate_boost_ability.gd" id="5_hve3p"]
[ext_resource type="Script" uid="uid://bf28q005qtvbc" path="res://Scripts/Abilities/power_shot_ability.gd" id="6_hve3p"]
[ext_resource type="Script" uid="uid://b0hnw34sgf8um" path="res://Scripts/WaveManager/wave_manager.gd" id="8_lc2xo"]
[ext_resource type="PackedScene" uid="uid://bljxubxu5eg3j" path="res://Objects/BulletBase/bullet_base.tscn" id="8_mfdv2"]
[ext_resource type="Script" uid="uid://dssq5y3twr3y4" path="res://Scripts/WaveManager/wave_data.gd" id="9_80cx4"]
[ext_resource type="PackedScene" uid="uid://djs38cy8bwdv7" path="res://Objects/Enemy/enemy_base.tscn" id="10_7sc4i"]
[ext_resource type="Resource" uid="uid://bx8vj6p2k23n4" path="res://Data/WaveData/real/Wave_0.tres" id="10_e8heu"]
[ext_resource type="Resource" uid="uid://cigk0660woyvt" path="res://Data/WaveData/real/wave_3.tres" id="10_e36ub"]
[ext_resource type="Resource" uid="uid://ddxmacr6e0riv" path="res://Data/WaveData/real/wave_4.tres" id="10_hb5m1"]
[ext_resource type="Resource" uid="uid://b5mfeioe3gmjm" path="res://Data/WaveData/real/wave_1.tres" id="10_rvswv"]
[ext_resource type="Resource" uid="uid://cs2np5m8y180w" path="res://Data/WaveData/real/wave_2.tres" id="11_hb5m1"]
[ext_resource type="Resource" uid="uid://cgchv38hvlttb" path="res://Data/WaveData/real/Wave_7.tres" id="12_5b14r"]
[ext_resource type="Resource" uid="uid://cvlxkbw8betbi" path="res://Data/WaveData/real/Wave_6.tres" id="12_i2p71"]
[ext_resource type="PackedScene" uid="uid://dttnwpg88y083" path="res://Objects/Player/player.tscn" id="16_rvswv"]
[ext_resource type="Resource" uid="uid://c326rujinburw" path="res://Data/WaveData/real/Wave_5.tres" id="18_bnpwn"]
[ext_resource type="Texture2D" uid="uid://cy8pou57fxnrh" path="res://Art/BG/RealBG.png" id="18_hb5m1"]
[ext_resource type="PackedScene" uid="uid://dxae4nyei461n" path="res://Objects/LaserOfDeath/laser_of_death.tscn" id="18_rvswv"]
[ext_resource type="Texture2D" uid="uid://dnsrbb1pdfvib" path="res://Art/Castle/Castle.png" id="21_f1jbl"]
[ext_resource type="PackedScene" uid="uid://bufmu7frdb3wc" path="res://UI/Menus/pause_menu.tscn" id="22_pause"]
[ext_resource type="Texture2D" uid="uid://bqu44ygj7r6ta" path="res://Art/Sandbag/Sandbag.png" id="22_vaj68"]
[ext_resource type="PackedScene" path="res://UI/WaveAnnouncement/wave_announcement.tscn" id="23_wave"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_80nbo"]
size = Vector2(2.5714264, 13.12378)

[node name="Game" type="Node"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="PlayerHUD" parent="CanvasLayer" instance=ExtResource("1_ryrav")]

[node name="WaveAnnouncement" parent="CanvasLayer" instance=ExtResource("23_wave")]

[node name="PauseMenu" parent="CanvasLayer" instance=ExtResource("22_pause")]
visible = false

[node name="UpgradeScreen" parent="CanvasLayer" instance=ExtResource("2_eow3j")]
unique_name_in_owner = true
visible = false

[node name="GameManager" type="Node" parent="." groups=["game_manager"]]
script = ExtResource("1_fc0e3")
bg_start_color = Color(0.9073196, 0.849941, 0.82958084, 1)
bg_end_color = Color(0.26091576, 0.24179953, 0.28276289, 1)
day_time_length = 60.0

[node name="SpawnTimer" type="Timer" parent="GameManager"]

[node name="DayTimer" type="Timer" parent="GameManager"]
one_shot = true

[node name="AbilityManager" type="Node" parent="." node_paths=PackedStringArray("abilities") groups=["ability_manager"]]
script = ExtResource("4_vef74")
abilities = [NodePath("FireRateBoostAbility"), NodePath("PowerShotAbility")]
metadata/_custom_type_script = "uid://cfhy465135m07"

[node name="FireRateBoostAbility" type="Node" parent="AbilityManager"]
script = ExtResource("5_hve3p")
metadata/_custom_type_script = "uid://c60utqbyl6xt7"

[node name="PowerShotAbility" type="Node" parent="AbilityManager"]
script = ExtResource("6_hve3p")
metadata/_custom_type_script = "uid://bf28q005qtvbc"

[node name="AugmentManager" type="Node" parent="." groups=["augment_manager"]]
script = ExtResource("5_augment")

[node name="WaveManager" type="Node" parent="."]
script = ExtResource("8_lc2xo")
waves = Array[ExtResource("9_80cx4")]([ExtResource("12_5b14r"), ExtResource("10_e8heu"), ExtResource("10_rvswv"), ExtResource("11_hb5m1"), ExtResource("10_e36ub"), ExtResource("10_hb5m1"), ExtResource("18_bnpwn"), ExtResource("12_i2p71")])
enemy_base_scene = ExtResource("10_7sc4i")
metadata/_custom_type_script = "uid://b0hnw34sgf8um"

[node name="MouseShooter" parent="." instance=ExtResource("1_feb5d")]
BULLET_BASE = ExtResource("8_mfdv2")
accuracy = 0.798
bullet_type = 1
fire_mode = 2
fire_rate = 300.0
magazine_size = 1000
explosion_damage = 0
bleed_chance = 0.1

[node name="BG2" type="TextureRect" parent="."]
modulate = Color(0.8530103, 0.7348689, 0.6901674, 1)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("18_hb5m1")
expand_mode = 1

[node name="Environment" type="Node2D" parent="."]

[node name="Art" type="Node2D" parent="Environment"]
position = Vector2(1014, 676)

[node name="Castle2" type="Sprite2D" parent="Environment/Art"]
position = Vector2(300, -340.33194)
scale = Vector2(0.88717616, 0.88717616)
texture = ExtResource("21_f1jbl")

[node name="Castle" type="Sprite2D" parent="Environment/Art"]
position = Vector2(238, -205)
scale = Vector2(0.6601558, 0.6601558)
texture = ExtResource("21_f1jbl")

[node name="Sandbag" type="Sprite2D" parent="Environment/Art"]
position = Vector2(5, 3.999999)
scale = Vector2(0.358, 0.358)
texture = ExtResource("22_vaj68")

[node name="Sandbag2" type="Sprite2D" parent="Environment/Art"]
position = Vector2(4, -26)
rotation = -0.22331324
scale = Vector2(0.358, 0.358)
texture = ExtResource("22_vaj68")

[node name="Sandbag3" type="Sprite2D" parent="Environment/Art"]
position = Vector2(0.99999905, -61.000008)
rotation = 0.025571465
scale = Vector2(0.358, 0.358)
texture = ExtResource("22_vaj68")

[node name="Sandbag4" type="Sprite2D" parent="Environment/Art"]
position = Vector2(-1.0000005, -91)
rotation = -0.2453804
scale = Vector2(0.358, 0.358)
texture = ExtResource("22_vaj68")

[node name="Sandbag5" type="Sprite2D" parent="Environment/Art"]
position = Vector2(-4.000001, -123)
rotation = 0.07008958
scale = Vector2(0.358, 0.358)
texture = ExtResource("22_vaj68")

[node name="Sandbag6" type="Sprite2D" parent="Environment/Art"]
position = Vector2(1.791565, -150.53967)
rotation = 0.16627002
scale = Vector2(0.358, 0.358)
texture = ExtResource("22_vaj68")

[node name="Sandbag7" type="Sprite2D" parent="Environment/Art"]
position = Vector2(0.79156446, -180.53969)
rotation = -0.057043225
scale = Vector2(0.358, 0.358)
texture = ExtResource("22_vaj68")

[node name="Sandbag8" type="Sprite2D" parent="Environment/Art"]
position = Vector2(2.9999988, -216)
rotation = 0.19184148
scale = Vector2(0.358, 0.358)
texture = ExtResource("22_vaj68")

[node name="Sandbag9" type="Sprite2D" parent="Environment/Art"]
position = Vector2(2.9999995, -252)
rotation = -0.079110384
scale = Vector2(0.358, 0.358)
texture = ExtResource("22_vaj68")

[node name="Sandbag10" type="Sprite2D" parent="Environment/Art"]
position = Vector2(3.999998, -280.99997)
rotation = 0.2363596
scale = Vector2(0.358, 0.358)
texture = ExtResource("22_vaj68")

[node name="Sandbag11" type="Sprite2D" parent="Environment/Art"]
position = Vector2(4.999998, -312.99997)
rotation = -0.028782487
scale = Vector2(0.358, 0.358)
texture = ExtResource("22_vaj68")

[node name="Sandbag12" type="Sprite2D" parent="Environment/Art"]
position = Vector2(6.999998, -335)
rotation = 0.07394907
scale = Vector2(0.358, 0.358)
texture = ExtResource("22_vaj68")

[node name="WallArea2D" type="Area2D" parent="Environment" groups=["wall"]]
position = Vector2(1030, 606)
scale = Vector2(14.00005, 28.99991)
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Environment/WallArea2D"]
position = Vector2(-0.7857132, -3.1967583)
scale = Vector2(0.9999996, 0.9999996)
shape = SubResource("RectangleShape2D_80nbo")

[node name="AirImpactArea2D" type="Area2D" parent="Environment" groups=["air_impact"]]
position = Vector2(1376.0001, 176.99998)
scale = Vector2(14.00005, 28.99991)
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Environment/AirImpactArea2D"]
position = Vector2(-0.7857111, -2.2603426)
scale = Vector2(0.99999964, 0.9999997)
shape = SubResource("RectangleShape2D_80nbo")

[node name="Entities" type="Node2D" parent="."]

[node name="Enemies" type="Node2D" parent="Entities" groups=["enemies"]]
y_sort_enabled = true

[node name="Allies" type="Node2D" parent="Entities" groups=["allies"]]

[node name="Player" parent="Entities/Allies" groups=["player"] instance=ExtResource("16_rvswv")]
modulate = Color(0.7802, 0.94, 0.78552663, 1)
position = Vector2(1070, 456)
scale = Vector2(3.312498, 3.3124986)

[node name="Ally1Spawn" type="Marker2D" parent="Entities/Allies"]
unique_name_in_owner = true
position = Vector2(1104, 387)

[node name="Ally2Spawn" type="Marker2D" parent="Entities/Allies"]
unique_name_in_owner = true
position = Vector2(1104, 546)

[node name="Ally3Spawn" type="Marker2D" parent="Entities/Allies"]
unique_name_in_owner = true
position = Vector2(1104, 607)

[node name="Ally4Spawn" type="Marker2D" parent="Entities/Allies"]
unique_name_in_owner = true
position = Vector2(1104, 675)

[node name="Neutral" type="Node2D" parent="Entities" groups=["neutral_entities"]]

[node name="BulletSpawnPoint" type="Marker2D" parent="Entities/Neutral"]
unique_name_in_owner = true
position = Vector2(1035, 444)

[node name="FroggertSpawns" type="Node2D" parent="Entities/Neutral" groups=["froggert_spawns"]]

[node name="Ally1Spawn" type="Marker2D" parent="Entities/Neutral/FroggertSpawns"]
position = Vector2(924, 399)

[node name="Ally2Spawn" type="Marker2D" parent="Entities/Neutral/FroggertSpawns"]
position = Vector2(924, 535)

[node name="Ally3Spawn" type="Marker2D" parent="Entities/Neutral/FroggertSpawns"]
position = Vector2(924, 596)

[node name="Ally4Spawn" type="Marker2D" parent="Entities/Neutral/FroggertSpawns"]
position = Vector2(924, 687)

[node name="Ally5Spawn" type="Marker2D" parent="Entities/Neutral/FroggertSpawns"]
position = Vector2(924, 464)

[node name="Spawner" type="Node2D" parent="." groups=["spawner"]]
unique_name_in_owner = true
position = Vector2(-181, 0)
script = ExtResource("5_7jktm")

[node name="Ground" type="Node2D" parent="Spawner"]
unique_name_in_owner = true

[node name="Pos1" type="Marker2D" parent="Spawner/Ground"]
position = Vector2(0, 607)

[node name="Pos2" type="Marker2D" parent="Spawner/Ground"]
position = Vector2(0, 557)

[node name="Pos3" type="Marker2D" parent="Spawner/Ground"]
position = Vector2(0, 507)

[node name="Pos4" type="Marker2D" parent="Spawner/Ground"]
position = Vector2(0, 457)

[node name="Pos5" type="Marker2D" parent="Spawner/Ground"]
position = Vector2(0, 407)

[node name="Air" type="Node2D" parent="Spawner"]
unique_name_in_owner = true

[node name="Pos1" type="Marker2D" parent="Spawner/Air"]
position = Vector2(2, 224)

[node name="Pos2" type="Marker2D" parent="Spawner/Air"]
position = Vector2(2, 168)

[node name="Pos3" type="Marker2D" parent="Spawner/Air"]
position = Vector2(2, 106)

[node name="LaserOfDeath" parent="." instance=ExtResource("18_rvswv")]
position = Vector2(1229, 387)
enabled = false
follow_speed = 15.0

[connection signal="all_enemies_killed" from="GameManager" to="GameManager" method="_on_all_enemies_killed"]
[connection signal="day_timer_finished" from="GameManager" to="GameManager" method="_on_day_timer_finished"]
[connection signal="start_new_day" from="GameManager" to="GameManager" method="_on_start_new_day"]
[connection signal="timeout" from="GameManager/SpawnTimer" to="GameManager" method="_on_spawn_timer_timeout"]
[connection signal="timeout" from="GameManager/DayTimer" to="GameManager" method="_on_day_timer_timeout"]
[connection signal="child_exiting_tree" from="Entities/Enemies" to="GameManager" method="_on_enemies_child_exiting_tree"]
